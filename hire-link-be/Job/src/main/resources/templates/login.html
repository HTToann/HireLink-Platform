<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<!-- Head từ fragment styles + chèn thêm asset trang login -->
<head th:replace="~{base :: styles('Đăng nhập', ~{::extraHead})}">
    <th:block th:fragment="extraHead">
        <link rel="stylesheet" th:href="@{/css/login.css}">
    </th:block>
</head>

<body class="d-flex flex-column min-vh-100">

<main class="flex-grow-1 d-flex justify-content-center align-items-center px-3">
    <div class="col-md-6 col-lg-5 login-card">
        <h2 class="text-center mb-4 text-info">ĐĂNG NHẬP</h2>

        <div th:if="${param.logout}">
            <div class="alert alert-success">Bạn đã đăng xuất.</div>
        </div>

        <div th:if="${param.error}">
            <div class="alert alert-danger" th:if="${param.error[0] == 'true'}">
                Tên đăng nhập hoặc mật khẩu không đúng.
            </div>
            <div class="alert alert-warning" th:if="${param.error[0] == 'unauthorized'}">
                Bạn không có quyền truy cập.
            </div>
        </div>

        <form method="post" th:action="@{/login}">
            <!-- CSRF (Spring Security) -->
            <th:block th:if="${_csrf != null}">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
            </th:block>

            <div class="mb-3 mt-3">
                <label for="username" class="form-label">Tên đăng nhập</label>
                <input type="text"
                       class="form-control"
                       id="username"
                       name="username"
                       placeholder="Tên đăng nhập"
                       autocomplete="username"
                       autofocus
                       required />
            </div>

            <div class="mb-3 mt-3">
                <label for="password" class="form-label">Mật khẩu</label>
                <input type="password"
                       class="form-control"
                       id="password"
                       name="password"
                       placeholder="Mật khẩu"
                       autocomplete="current-password"
                       required />
            </div>

            <div class="form-check mb-3">
              <input class="form-check-input" type="checkbox" id="remember-me" name="remember-me">
              <label class="form-check-label" for="remember-me">Ghi nhớ đăng nhập</label>
            </div>


            <div class="mb-3 mt-3 text-center">
                <button class="btn btn-info px-4" type="submit">Đăng nhập</button>
            </div>
        </form>
    </div>
</main>

<!-- Footer -->
<div th:replace="~{base :: footer}"></div>
</body>
</html>
